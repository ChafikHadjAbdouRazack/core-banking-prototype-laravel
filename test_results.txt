
   WARN  XDEBUG_MODE=coverage (environment variable) or xdebug.mode=coverage (PHP configuration setting) has to be set

   PASS  Tests\Unit\Console\Commands\CommandsTest
  ✓ it cache warmup command has correct signature                        0.69s  
  ✓ it create snapshot command has correct signature                     0.23s  
  ✓ it commands extend laravel command class                             0.21s  
  ✓ it commands have proper visibility                                   0.23s  
  ✓ it commands have proper names and descriptions                       0.30s  

   PASS  Tests\Unit\DataObjects\AccountUuidTest
  ✓ it can create account uuid from string                               0.35s  
  ✓ it can create account uuid with specific value                       0.33s  
  ✓ it can create new instance with different uuid                       0.34s  
  ✓ it can convert to array                                              0.36s  
  ✓ it creates consistent account uuid objects                           0.26s  

   PASS  Tests\Unit\DataObjects\HashTest
  ✓ it can create a hash with valid sha3-512 format                      0.23s  
  ✓ it validates hash format correctly                                   0.48s  
  ✓ it throws exception for invalid hash format                          0.47s  
  ✓ it throws exception for wrong length hash                            0.28s  
  ✓ it can compare hash equality                                         0.23s  
  ✓ it can convert to array                                              0.31s  

   PASS  Tests\Unit\DataObjects\MoneyTest
  ✓ it can create money with integer amount                              0.25s  
  ✓ it can create money with zero amount                                 0.35s  
  ✓ it can handle negative amounts                                       0.41s  
  ✓ it can invert money amount                                           0.26s  
  ✓ it can invert negative money amount                                  0.32s  
  ✓ it can convert to array                                              0.37s  
  ✓ it handles large amounts correctly                                   0.18s  
  ✓ it invert operation creates new instance                             0.22s  

   PASS  Tests\Unit\Domain\Account\Actions\CreditAccountTest
  ✓ credits existing balance                                             2.29s  
  ✓ creates new balance if not exists                                    0.34s  
  ✓ handles multiple credits to same account                             0.27s  
  ✓ handles different asset codes                                        0.42s  

   PASS  Tests\Unit\Domain\Account\Actions\DebitAccountTest
  ✓ debits existing balance                                              0.22s  
  ✓ throws exception if balance not found                                0.27s  
  ✓ throws exception if insufficient balance                             0.24s  
  ✓ handles exact balance debit                                          0.28s  
  ✓ handles multiple debits                                              0.24s  

   PASS  Tests\Unit\Domain\Account\Actions\FreezeAccountTest
  ✓ freezes account successfully                                         0.29s  
  ✓ freezes already frozen account                                       0.48s  
  ✓ throws exception if account not found                                0.22s  
  ✓ freezes account with balances                                        0.32s  

   PASS  Tests\Unit\Domain\Account\Actions\UnfreezeAccountTest
  ✓ unfreezes frozen account successfully                                0.44s  
  ✓ unfreezes already unfrozen account                                   0.35s  
  ✓ throws exception if account not found                                0.42s  
  ✓ unfreezes account preserving balances                                0.40s  
  ✓ unfreezes business account                                           0.38s  

   PASS  Tests\Unit\Domain\Account\Aggregates\TransactionAggregateTest
  ✓ credits money to account                                             0.28s  
  ✓ debits money from account                                            0.22s  
  ✓ throws exception when insufficient funds                             0.26s  
  ✓ applies money added event                                            0.56s  
  ✓ applies money subtracted event                                       0.22s  
  ✓ records transaction threshold reached                                0.88s  
  ✓ resets count after threshold                                         0.43s  
  ✓ records account limit hit on debit                                   0.38s  
  ✓ validates hash for duplicate prevention                              0.51s  
  ✓ handles different currencies                                         0.44s  
  ✓ maintains balance across multiple operations                         0.30s  
  ✓ snapshot preserves state                                             0.20s  

   PASS  Tests\Unit\Domain\Account\Aggregates\TransferAggregateTest
  ✓ transfers money between accounts                                     0.25s  
  ✓ applies money transferred event                                      0.16s  
  ✓ records transfer threshold reached                                   0.74s  
  ✓ resets count after threshold                                         0.27s  
  ✓ validates hash for duplicate prevention                              0.25s  
  ✓ handles different currency transfers                                 0.27s  
  ✓ maintains count across multiple transfers                            0.37s  
  ✓ handles large transfer amounts                                       0.51s  
  ✓ snapshot preserves transfer count                                    0.33s  
  ✓ transfer between same account allowed                                0.47s  

   PASS  Tests\Unit\Domain\Account\Events\AccountEventsTest
  ✓ it can create account created event                                  0.48s  
  ✓ it can create account deleted event                                  0.46s  
  ✓ it can create account frozen event with reason                       0.30s  
  ✓ it can create account frozen event with reason and authorized by     0.27s  
  ✓ it can create account unfrozen event                                 0.18s  
  ✓ it can create account unfrozen event with authorized by              0.18s  
  ✓ it events extend ShouldBeStored                                      0.41s  

   PASS  Tests\Unit\Domain\Account\Events\AssetBalanceAddedTest
  ✓ creates event with required properties                               0.50s  
  ✓ creates event with metadata                                          0.45s  
  ✓ get amount returns correct value                                     0.35s  
  ✓ get asset code returns correct value                                 0.26s  
  ✓ handles zero amount                                                  0.43s  
  ✓ stores different asset codes                                         0.36s  
  ✓ event is immutable                                                   0.26s  

   PASS  Tests\Unit\Domain\Account\Events\AssetBalanceSubtractedTest
  ✓ creates event with required properties                               0.44s  
  ✓ creates event with metadata                                          0.40s  
  ✓ get amount returns correct value                                     0.32s  
  ✓ get asset code returns correct value                                 0.31s  
  ✓ handles large amount subtraction                                     0.37s  
  ✓ metadata can contain complex data                                    0.48s  
  ✓ event properties are readonly                                        0.29s  
  ✓ supports crypto asset codes                                          0.50s  

   PASS  Tests\Unit\Domain\Account\Exceptions\ExceptionsTest
  ✓ it can create invalid hash exception                                 0.45s  
  ✓ it can create not enough funds exception                             0.21s  
  ✓ it exceptions have default messages when none provided               0.40s  
  ✓ it exceptions have proper inheritance                                0.53s  
  ✓ it can throw and catch invalid hash exception                        0.50s  
  ✓ it can throw and catch not enough funds exception                    0.39s  

   PASS  Tests\Unit\Domain\Cgo\RefundAggregateTest
  ✓ can request refund                                                   0.39s  
  ✓ can approve pending refund                                           0.45s  
  ✓ cannot approve non pending refund                                    0.35s  
  ✓ can reject pending refund                                            0.58s  
  ✓ can process approved refund                                          0.60s  
  ✓ can complete processing refund                                       0.47s  
  ✓ can fail refund                                                      0.43s  
  ✓ can cancel refund                                                    0.46s  
  ✓ cannot cancel completed refund                                       0.45s  

   PASS  Tests\Unit\Domain\Compliance\Aggregates\AmlScreeningAggregateTest
  ✓ can start screening                                                  0.52s  
  ✓ can record screening results                                         0.51s  
  ✓ can update match status                                              0.49s  
  ✓ throws exception for invalid match action                            0.63s  
  ✓ can complete screening                                               0.59s  
  ✓ throws exception for invalid completion status                       0.71s  
  ✓ can review screening                                                 0.60s  
  ✓ throws exception for invalid review decision                         0.48s  
  ✓ tracks state correctly                                               0.61s  

   WARN  Tests\Unit\Domain\Compliance\Aggregates\ComplianceAggregateTest
  ! submit kyc records submission and document events → This test did n… 0.39s  
  ! approve kyc records verification completed → This test did not perf… 0.34s  
  ! reject kyc records verification rejected → This test did not perfor… 0.36s  
  ✓ request gdpr export records request event                            0.25s  
  ✓ complete gdpr export records export event                            0.36s  
  ! request gdpr deletion records request event → This test did not per… 0.46s  
  ! complete gdpr deletion records deletion event → This test did not p… 0.49s  
  ! generate regulatory report records report event → This test did not… 0.17s  
  ✓ applies kyc submission received event                                0.26s  
  ✓ applies kyc verification completed event                             0.22s  
  ✓ applies kyc verification rejected event                              0.31s  
  ! full kyc workflow → This test did not perform any assertions         0.31s  
  ✓ full gdpr workflow                                                   0.33s  

   PASS  Tests\Unit\Domain\Compliance\Events\KycDocumentUploadedTest
  ✓ creates event with user uuid and document                            0.53s  
  ✓ handles different document types                                     0.30s  
  ✓ event extends should be stored                                       0.32s  
  ✓ handles document with validation results                             0.51s  
  ✓ handles document with security checks                                0.73s  
  ✓ handles minimal document data                                        0.79s  
  ✓ handles document with processing metadata                            0.54s  

   PASS  Tests\Unit\Domain\Compliance\Events\KycVerificationCompletedTest
  ✓ creates event with user uuid and level                               0.54s  
  ✓ handles different verification levels                                0.28s  
  ✓ event extends should be stored                                       0.58s  
  ✓ event properties are public                                          0.73s  

   PASS  Tests\Unit\Domain\Compliance\Events\SuspiciousActivityDetectedTest
  ✓ creates event with transaction and alerts                            0.40s  
  ✓ event uses required traits                                           0.51s  
  ✓ event properties are readonly                                        0.44s  
  ✓ event serializes correctly                                           0.50s  
  ✓ handles empty alerts array                                           0.61s  
  ✓ handles complex alert structures                                     0.47s  
  ✓ can be dispatched as event                                           0.74s  

   PASS  Tests\Unit\Domain\Compliance\Services\AmlScreeningServiceTest
  ✓ perform sanctions screening checks multiple lists                    0.56s  
  ✓ perform pep screening                                                0.50s  
  ✓ perform adverse media screening                                      0.47s  
  ✓ calculate overall risk with no matches                               0.45s  
  ✓ calculate overall risk with sanctions match                          0.50s  
  ✓ calculate overall risk with pep match                                0.40s  
  ✓ calculate overall risk with adverse media                            0.55s  
  ✓ calculate overall risk with serious adverse media                    0.53s  
  ✓ count total matches                                                  0.41s  
  ✓ generate unique screening number                                     0.63s  
  ✓ build search parameters for user                                     0.46s  
  ✓ build search parameters with additional params                       0.62s  
  ✓ check ofac list with no matches                                      0.56s  
  ✓ check ofac list with test match                                      0.33s  
  ✓ check pep database negative                                          0.42s  
  ✓ check pep database positive                                          0.44s  
  ✓ search adverse media no results                                      0.62s  
  ✓ search adverse media with results                                    0.55s  

   PASS  Tests\Unit\Domain\Compliance\Services\GdprServiceTest
  ✓ export user data returns complete data structure                     0.59s  
  ✓ export user data creates audit log                                   0.58s  
  ✓ delete user data anonymizes user                                     0.28s  
  ✓ delete user data creates deletion audit log                          0.54s  
  ✓ delete user data with document deletion option                       0.68s  
  ✓ delete user data without document deletion                           0.52s  
  ✓ get user data returns sanitized data                                 0.45s  
  ✓ export includes transaction history                                  0.19s  
  ✓ anonymize user preserves data relationships                          0.18s  
  ✓ export handles user with no data                                     0.40s  
  ✓ delete creates final audit log after deletion                        0.35s  

   PASS  Tests\Unit\Domain\Compliance\Services\KycServiceTest
  ✓ submit kyc updates user status                                       0.50s  
  ✓ submit kyc stores documents                                          0.57s  
  ✓ submit kyc creates audit log                                         0.30s  
  ✓ verify kyc approves user                                             0.47s  
  ✓ verify kyc creates audit log                                         0.40s  
  ✓ reject kyc updates status                                            0.24s  
  ✓ get kyc status returns user status                                   0.23s  
  ✓ is kyc approved returns correct boolean                              0.23s  
  ✓ store document creates hash                                          0.31s  
  ✓ handle document with different types                                 0.49s  

   PASS  Tests\Unit\Domain\Compliance\Services\TransactionMonitoringServiceTest
  ✓ monitor transaction passes when no alerts                            0.36s  
  ✓ monitor transaction creates alerts for triggered rules               0.35s  
  ✓ monitor transaction blocks when block action triggered               0.45s  
  ✓ monitor transaction handles multiple rules                           0.41s  
  ✓ monitor transaction handles exceptions gracefully                    0.35s  
  ✓ monitor transaction updates behavioral risk when alerts exist        0.28s  
  ✓ monitor transaction deduplicates actions                             0.37s  

   PASS  Tests\Unit\Domain\Exchange\LiquidityPool\AutomatedMarketMakerServiceTest
  ✓ generates market making orders for pool                              0.55s  
  ✓ adjusts spread based on market conditions                            0.45s  
  ✓ calculates order sizes based on reserves                             0.29s  
  ✓ adjusts market making parameters                                     0.65s  

   PASS  Tests\Unit\Domain\Exchange\LiquidityPool\LiquidityIncentivesServiceTest
  ✓ calculates pool rewards based on tvl                                 0.58s  
  ✓ applies performance multipliers                                      0.38s  
  ✓ calculates provider rewards proportionally                           0.54s  
  ✓ applies early provider bonus                                         0.29s  
  ✓ calculates provider apy                                              0.29s  

   WARN  Tests\Unit\Domain\Exchange\LiquidityPool\Reactors\SnapshotLiquidityPoolReactorTest
  - takes snapshot on large liquidity addition → Liquidity pool implementation is incomplete - Events do not exist
  - takes snapshot on large liquidity removal → Liquidity pool implementation is incomplete - Events do not exist
  - takes snapshot after multiple rebalances → Liquidity pool implementation is incomplete - Events do not exist
  - takes snapshot on large reward distribution → Liquidity pool implementation is incomplete - Events do not exist
  - does not snapshot on small liquidity addition → Liquidity pool implementation is incomplete - Events do not exist

   PASS  Tests\Unit\Domain\Exchange\LiquidityPool\ValueObjects\LiquidityShareTest
  ✓ can create liquidity share                                           0.01s  
  ✓ handles zero total shares
  ✓ throws exception for negative amount
  ✓ can create zero share
  ✓ can add shares
  ✓ can subtract shares
  ✓ throws exception when subtracting more than available
  ✓ calculate proportional amount
  ✓ comparison methods
  ✓ to array

   PASS  Tests\Unit\Domain\Exchange\LiquidityPool\ValueObjects\PoolIdTest
  ✓ can create valid pool id                                             0.01s  
  ✓ converts to lowercase
  ✓ throws exception for empty value
  ✓ throws exception for invalid uuid
  ✓ can generate new pool id
  ✓ can create from string
  ✓ equals method
  ✓ to array

   PASS  Tests\Unit\Domain\Exchange\LiquidityPool\ValueObjects\PoolRatioTest
  ✓ can create pool ratio                                                0.01s  
  ✓ throws exception for negative reserves
  ✓ throws exception for zero reserves
  ✓ calculate deviation
  ✓ is deviation within tolerance
  ✓ calculate price impact base input
  ✓ calculate price impact quote input
  ✓ to array

   PASS  Tests\Unit\Domain\Exchange\Services\CircuitBreakerServiceTest
  ✓ successful call returns result                                       0.54s  
  ✓ circuit opens after failure threshold                                0.61s  
  ✓ circuit transitions to half open                                     0.60s  
  ✓ circuit closes after success threshold in half open                  0.56s  
  ✓ circuit reopens on failure in half open                              0.63s  
  ✓ half open limits requests                                            0.53s  

   PASS  Tests\Unit\Domain\Exchange\Services\ExchangeServiceTest
  ✓ place order validates account exists                                 0.97s  
  ✓ place order validates currencies exist                               0.60s  
  ✓ place order validates currencies are tradeable                       0.57s  
  ✓ place order requires price for limit orders                          0.39s  
  ✓ place order requires stop price for stop orders                      0.55s  
  ✓ place order validates minimum amount                                 0.61s  
  ✓ place order creates market order successfully                        0.93s  
  ✓ place order creates limit order with price                           0.57s  
  ✓ cancel order validates order exists                                  0.37s  
  ✓ cancel order validates order can be cancelled                        0.40s  
  ✓ cancel order cancels successfully                                    0.49s  
  ✓ get order book returns empty for non existent pair                   0.58s  
  ✓ get order book returns formatted data                                0.40s  

   PASS  Tests\Unit\Domain\Exchange\Services\LiquidityPoolServiceTest
  ✓ create pool creates new liquidity pool                               0.50s  
  ✓ create pool throws exception if pool exists                          0.47s  
  ✓ add liquidity delegates to workflow                                  0.44s  
  ✓ remove liquidity delegates to workflow                               0.66s  
  ✓ swap executes pool swap                                              0.44s  
  ✓ get pool returns pool projection                                     0.49s  
  ✓ get pool returns null for non existent pool                          0.51s  
  ✓ get pool by pair returns matching pool                               0.79s  
  ✓ get active pools returns only active pools                           0.45s  
  ✓ get provider positions returns positions with pools                  0.48s  
  ✓ get pool metrics calculates correct values                           0.49s  
  ✓ rebalance pool delegates to workflow                                 0.44s  
  ✓ distribute rewards calls aggregate                                   0.41s  
  ✓ claim rewards processes pending rewards                              0.52s  
  ✓ claim rewards throws exception when no rewards                       0.42s  

   PASS  Tests\Unit\Domain\Fraud\Events\FraudDetectedTest
  ✓ creates event with fraud score                                       0.68s  
  ✓ event uses required traits                                           0.81s  
  ✓ tags method returns correct tags                                     0.28s  
  ✓ event serializes correctly                                           0.43s  
  ✓ can be dispatched as event                                           0.69s  
  ✓ handles different entity types                                       0.39s  
  ✓ handles different risk levels                                        0.46s  

   PASS  Tests\Unit\Domain\Fraud\Services\FraudDetectionServiceTest
  ✓ analyze transaction creates fraud score                              0.64s  
  ✓ analyze transaction with low risk passes                             0.60s  
  ✓ analyze transaction with medium risk requires challenge              0.49s  
  ✓ analyze transaction with high risk blocks transaction                0.39s  
  ✓ analyze transaction with ml enabled                                  0.48s  
  ✓ analyze transaction handles device data                              0.48s  
  ✓ analyze user activity for historical analysis                        0.33s  
  ✓ recalculate score updates existing score                             0.34s  
  ✓ get fraud indicators returns risk factors                            0.46s  

   PASS  Tests\Unit\Domain\Lending\Aggregates\LoanApplicationTest
  ✓ submit loan application successfully                                 0.53s  
  ✓ submit fails with zero amount                                        0.25s  
  ✓ submit fails with negative amount                                    0.37s  
  ✓ submit fails with invalid term too short                             0.33s  
  ✓ submit fails with invalid term too long                              0.43s  
  ✓ complete credit check                                                0.57s  
  ✓ complete risk assessment                                             0.48s  
  ✓ approve application                                                  0.47s  
  ✓ reject application                                                   0.28s  
  ✓ withdraw application                                                 0.35s  
  ✓ cannot approve without credit check                                  0.41s  
  ✓ cannot approve without risk assessment                               0.37s  
  ✓ cannot process already decided application                           0.44s  
  ✓ apply events updates state                                           0.63s  
