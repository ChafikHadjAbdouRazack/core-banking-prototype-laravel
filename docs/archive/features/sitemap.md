# Sitemap and SEO Implementation

## Overview

The FinAegis platform includes automatic sitemap generation and robots.txt file to improve search engine optimization (SEO) and ensure proper indexing of public pages.

## Features

### Sitemap.xml
- Automatically generated XML sitemap following the sitemap protocol
- Includes all public-facing pages
- Excludes authenticated/private pages
- Updates daily via scheduled task
- Accessible at `/sitemap.xml`

### Robots.txt
- Properly configured robots.txt file
- Allows indexing of public pages
- Blocks indexing of private/authenticated areas
- References the sitemap location
- Accessible at `/robots.txt`

## URLs Included in Sitemap

### High Priority Pages (1.0 - 0.9)
- Homepage (`/`)
- About (`/about`)
- Platform (`/platform`)
- GCU (`/gcu`)
- Pricing (`/pricing`)

### Medium Priority Pages (0.8 - 0.7)
- Features (`/features`, `/features/gcu`)
- Security (`/security`)
- Compliance (`/compliance`)
- Sub-products (`/sub-products`, `/subproducts/*`)
- Developer resources (`/developers`)
- Support pages (`/support`)
- CGO (`/cgo`)
- Blog (`/blog`)
- Authentication pages (`/login`, `/register`)

### Lower Priority Pages (0.6 - 0.5)
- Support sub-pages (`/support/contact`, `/support/faq`, `/support/guides`)
- Partners (`/partners`)
- Status page (`/status`)
- Financial institutions (`/financial-institutions/apply`)
- Legal pages (`/legal/terms`, `/legal/privacy`, `/legal/cookies`, `/cgo/terms`)

## Implementation Details

### Controller
The sitemap is generated by `App\Http\Controllers\SitemapController` which:
- Dynamically generates XML content
- Sets appropriate content-type headers
- Includes lastmod, changefreq, and priority for each URL

### Routes
```php
Route::get('/sitemap.xml', [SitemapController::class, 'index'])->name('sitemap');
Route::get('/robots.txt', [SitemapController::class, 'robots'])->name('robots');
```

### Console Command
Generate sitemap manually:
```bash
php artisan sitemap:generate
```

Options:
- `--output=path/to/sitemap.xml` - Specify custom output location

### Scheduled Task
The sitemap is automatically regenerated daily at midnight:
```php
Schedule::command('sitemap:generate')
    ->daily()
    ->description('Generate sitemap.xml and robots.txt for SEO');
```

## Testing

Run the sitemap tests:
```bash
./vendor/bin/pest tests/Feature/SitemapTest.php
```

The tests verify:
- Sitemap accessibility
- Correct XML structure
- Presence of essential URLs
- Exclusion of private routes
- robots.txt functionality

## Adding New Public Pages

When adding new public pages to the application:

1. Add the URL to the `getPublicRoutes()` method in `SitemapController`
2. Set appropriate priority (0.0 - 1.0)
3. Set changefreq (always, hourly, daily, weekly, monthly, yearly, never)
4. The sitemap will automatically include it on next generation

## SEO Best Practices

1. **Priority Values**:
   - 1.0: Homepage only
   - 0.9: Main navigation pages
   - 0.8: Feature and product pages
   - 0.7: Support and secondary pages
   - 0.6: Tertiary pages
   - 0.5: Legal/policy pages

2. **Change Frequency**:
   - `daily`: Homepage, blog
   - `weekly`: Product pages, features
   - `monthly`: Legal pages, about
   - `hourly`: Status page

3. **Exclusions**:
   - All authenticated routes
   - API endpoints
   - Admin areas
   - User-specific pages

## Monitoring

Check sitemap generation logs:
```bash
tail -f storage/logs/sitemap-generation.log
```

## Future Enhancements

1. **Dynamic Blog Posts**: When blog functionality is fully implemented, add individual blog post URLs
2. **Multi-language Support**: Add hreflang tags for internationalization
3. **Image Sitemap**: Add image sitemap for better image indexing
4. **Video Sitemap**: If video content is added
5. **Sitemap Index**: Split into multiple sitemaps if URLs exceed 50,000